<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Envy Documentation</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="chapter_1.html"><strong aria-hidden="true">1.</strong> Setup</a></li><li class="chapter-item expanded "><a href="chapter_2.html"><strong aria-hidden="true">2.</strong> Module Configuration</a></li><li class="chapter-item expanded "><a href="chapter_3.html"><strong aria-hidden="true">3.</strong> Advanced Usage</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><a href="options.html">A. Configuration Options</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Envy Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>Envy is essentially a Nix-based plugin &amp; configuration manager for neovim,
providing:</p>
<ul>
<li><input disabled="" type="checkbox" checked=""/>
A convenient way to pin and package Vim plugins as Nix derivations.</li>
<li><input disabled="" type="checkbox" checked=""/>
The ability for Vim plugin derivations to correctly depend on and pull in
one another, and system dependencies (including plugin-native-language
dependencies, C library dependencies, and executable dependencies).</li>
<li><input disabled="" type="checkbox" checked=""/>
A Nix-based configuration mechanism that allows individual plugin
configuration to depend on the install-time state of other plugins,
dependencies, and potentially the system (in NixOS).</li>
<li><input disabled="" type="checkbox" checked=""/>
A way to "layer" per-project plugins+configuration on top of per-user, in
turn on top of per-system (albeit at a large memory cost at install-time).</li>
<li><input disabled="" type="checkbox" checked=""/>
A method for existing users of NixOS/home-manager to tightly integrate
neovim configuration into it, meaning that aspects of their neovim
configuration can reliably depend upon aspects of their system or user
configuration.</li>
<li><input disabled="" type="checkbox" checked=""/>
A means to specify nvimrc configuration in vimscript, Lua, or MoonScript.</li>
<li><input disabled="" type="checkbox" checked=""/>
More complexity than you want or need (probably).</li>
<li><input disabled="" type="checkbox"/>
An end to world hunger.</li>
</ul>
<p>The numbered chapters are intended to be read in order, as they build upon
information in earlier chapters. The appendices are intended more as reference
material.</p>
<h2 id="why"><a class="header" href="#why">Why?</a></h2>
<p>Mostly because neovim plugin configuration is a bit of a clusterfuck. There's a
deceptively (and increasingly) large amount of inherent complexity to the
problem space, because neo/vim plugins can have dependencies on many axes
(inter-plugin, external executable, Lua modules, remote host language modules,
etc.), and those in turn have their own dependency closures, and may also
depend on the system or user-level configuration.</p>
<p>Trying to reliably manage this cross-language, cross-system complexity using
<em>anything other than Nix</em> quickly descends into either A) madness, or B)
compromise. I'm not big on compromise.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="1-basic-usage"><a class="header" href="#1-basic-usage">1. Basic Usage</a></h1>
<p>The main Envy module can basically be used in three different ways:</p>
<ol>
<li>It can be used as a NixOS module, to configure neovim system-wide.</li>
<li>It can be used as a home-manager module, to configure neovim on a per-user
basis.</li>
<li>It can be used standalone, e.g. in order to configure a custom neovim
instance for a project's <code>shell.nix</code>.</li>
</ol>
<p>In each of these uses, the module is configured in basically the same way, but
adding/accessing the module to begin with differs.</p>
<h2 id="module-setup"><a class="header" href="#module-setup">Module Setup</a></h2>
<p>Both the NixOS and home-manager modules expose the configuration interface
under <code>sn.programs.neovim</code> in NixOS; if you want to use a different
attribute path for it, take a look at the
<code>envy/nixos.nix</code>/<code>envy/home-manager.nix</code> source and manually do the same.</p>
<p>Both modules take an <code>enabled</code> argument, which defaults to <code>true</code>, rather than
exposing a <code>sn.programs.neovim.enable</code> option, due to a technical limitation.</p>
<h3 id="nixos"><a class="header" href="#nixos">NixOS</a></h3>
<p>Add the <code>envy/nixos.nix</code> module to <code>imports</code> in your <code>configuration.nix</code>:</p>
<pre><code class="language-nix">{ config, lib, pkgs, ... }:
let
  envy = (builtins.fetchgit { url = https://github.com/Shados/envy; ref = "master"; });
in
{
  imports = [
    (import "${envy}/nixos.nix" { })
    ...
  ];
  ...
}
</code></pre>
<p>Or, if you've added envy as a flake input and have flake inputs available in your module arguments:</p>
<pre><code class="language-nix">{ config, lib, inputs, pkgs, ... }:
{
  imports = [
    (envy.nixosModules.default { })
    ...
  ];
  ...
}
</code></pre>
<h3 id="home-manager"><a class="header" href="#home-manager">home-manager</a></h3>
<p>Add the <code>envy/home-manager.nix</code> module to <code>imports</code> in your <code>configuration.nix</code>:</p>
<pre><code class="language-nix">{ config, lib, pkgs, ... }:
let
  envy = (builtins.fetchgit { url = https://github.com/Shados/envy; ref = "master"; });
in
{
  imports = [
    (import "${envy}/home-manager.nix" { })
    ...
  ];
  ...
}
</code></pre>
<p>Or, if you've added envy as a flake input and have flake inputs available in your module arguments:</p>
<pre><code class="language-nix">{ config, lib, inputs, pkgs, ... }:
{
  imports = [
    (envy.homeModules.default { })
    ...
  ];
  ...
}
</code></pre>
<h2 id="standalone-setup"><a class="header" href="#standalone-setup">Standalone Setup</a></h2>
<p>Usage as a standalone module is slightly more complicated, and is most easily
done by use of the <code>configuredNeovimModule</code> in Envy's <code>lib</code> module:</p>
<pre><code class="language-nix">{ nixpkgs ? import &lt;nixpkgs&gt; { } }:
let
  envy = (builtins.fetchgit { url = https://github.com/Shados/envy; ref = "master"; });
  envyLib = (import "${envy}/lib.nix" { inherit nixpkgs; });
  envyModule = envyLib.configuredNeovimModule {
    nvimConfig = { config, lib, pkgs, ... }: {
      # Envy module config here
      pluginRegistry = {
        ...
      };
    };
  }
in
nixpkgs.mkShell {
  ...
  buildInputs = [
    envyModule.wrappedNeovim
    ...
  ];
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="2-module-configuration"><a class="header" href="#2-module-configuration">2. Module Configuration</a></h1>
<p>The full set of available configuration options is documented in Appendix A;
this chapter serves as an overview of the configuration process and provides
examples of how the options may be used.</p>
<p>Broadly, the process for configuring Envy is:</p>
<ol>
<li>Add non-plugin <code>init.vim</code> configuration.</li>
<li>Enable the plugins you want to use.</li>
<li>Specify any additional dependencies the plugins may have.</li>
<li>Add per-plugin configuration.</li>
</ol>
<h2 id="non-plugin-configuration"><a class="header" href="#non-plugin-configuration">Non-plugin Configuration</a></h2>
<p>Adapt your non-plugin <code>init.vim</code> configuration to use Envy's module options.</p>
<p>By "non-plugin" here we mean specifically things that either don't depend
on/configure <em>any</em> plugin, <em>or</em> that could depend on any one of several plugins
(in which case, you should use Nix functionality to check which/whether any of
those plugins are enabled and adapt the generated configuration appropriately).</p>
<p>Envy provides a wide array of options here, so some examples may be helpful:</p>
<pre><code class="language-nix">{ config, lib, pkgs, ... }:
{
  # Configuration items that should be done prior to any per-plugin configuration
  prePluginConfig = ''
    let mapleader = "\&lt;Space&gt;"
    augroup vimrc
      autocmd!
    augroup END
    set termguicolors
  '';
  # General configuration items that are appended to the end of the generated
  # vimrc. You can use e.g. `lib.mkAfter` if you need something to go at the
  # very end of the file.
  extraConfig = ''
    set incsearch
    set hlsearch
    set ignorecase
    set smartcase
    set number
    set relativenumber
    set autoindent
    set shiftwidth=2
    set softtabstop=2
    set tabstop=2
    set expandtab

    " Use Ripgrep (rg) for search backend
    let g:ackprg = '${pkgs.ripgrep}/bin/rg --vimgrep --smart-case --no-heading --max-filesize=4M'
    set grepprg:${pkgs.ripgrep}/bin/rg\ --vimgrep\ --smart-case\ --no-heading\ --max-filesize=4M

    nnoremap &lt;Leader&gt;o :exe ':silent !${pkgs.xdg-utils}/bin/xdg-open % &amp;'&lt;CR&gt;
  '';
  # A list of packages whose executables should be added to the $PATH for
  # neovim. These will *only* be added to neovim's path, not to the system or
  # user profiles.
  extraBinPackages = with pkgs; [
    silver-searcher
    xdg_utils # xdg-open
  ];
  # See chapter 3
  mergePlugins = true;
  # `files` can be used to build a symlink tree of files and folders, which
  # would typically consist of any extra/local contents of .config/nvim/ in a
  # non-Nix neovim setup.
  files = {
    neosnippets.source = "/my/snippet/files/";
  };
}
</code></pre>
<h2 id="enabling-plugins"><a class="header" href="#enabling-plugins">Enabling Plugins</a></h2>
<p>There are several ways to specify the source for a plugin, depending on what
you want:</p>
<pre><code class="language-nix">{ config, lib, pkgs, ... }:
{
  pluginRegistry = {
    # In this case, `source` is pointed to an existing Vim plugin derivation.
    "denite.nvim" = {
      enable = true;
      source = pkgs.vimPlugins.denite-nvim;
    };

    # In this case, Envy will dynamically construct a derivation using the
    # given Nix store path as the source.
    localPlugin = {
      enable = true;
      source = /some/local/path/or/store/path;
    };

    # Here we instead instruct Envy to have Vim load the plugin from a local
    # filesystem path at run-time, rather than bundling it into the Nix store.
    # This is useful for doing plugin development, or if you otherwise want to
    # use a plugin outside of the Nix store, while still allowing you to
    # leverage Envy's configuration and dependency specification/resolution
    # mechanisms.
    inDevPlugin = {
      enable = true;
      dir = "/a/local/path/string";
    };

    # Envy also provides a helper for constructing a vim plugin derivation from
    # a Niv sources.nix attrset, which you can then use as a source.
    vim-systemd-syntax = {
      enable = true;
      source = config.sn.programs.neovim.lib.buildVimPluginFromNiv (import ./pins { }) "vim-systemd-syntax";
    };
  };
}
</code></pre>
<h2 id="specifying-dependencies"><a class="header" href="#specifying-dependencies">Specifying Dependencies</a></h2>
<p>Envy allows for specifying a wide variety of dependency types:</p>
<pre><code class="language-nix">{ config, lib, pkgs, ... }:
{
  pluginRegistry = {
    # Inter-plugin dependencies; the items should either be `pluginRegistry`
    # attribute names or vim plugin derivations.
    neosnippet-snippets.dependencies = [ "neosnippet-vim" ];
    # Specifies that a plugin needs external executables from the given
    # packages made available in neovim's $PATH.
    ale.binDeps = with pkgs; [
      bash
      shellcheck
      shfmt
    ];
    # Ensures that the specified Lua modules will be made available in
    # neovim's LUA_PATH/LUA_CPATH, meaning that the main neovim process can
    # load them for in-process Lua plugins and scripts to use.
    "Shados/precog.nvim".luaDeps = ps: with ps; [
      luafilesystem
    ];
    # Flags a plugin as being a 'remote' plugin requiring a plugin host for a
    # specific language (here, Python 3).
    denite-nvim.remote.python3 = true;
    # Pulls in plugin-host-language dependencies.
    # Automatically implies `remote.python3 = true;`.
    aPythonPlugin.remote.python3Deps = ps: with ps; [
      requests
    ];
  };
}
</code></pre>
<p>Inter-plugin dependencies also determine the order in which Vim plugins are
loaded at Vim run-time (by <a href="https://github.com/junegunn/vim-plug">vim-plug</a>).</p>
<p>There are additionally two "soft" dependency options (<code>before</code> and <code>after</code>,
both of which take lists of plugin names only), that change how plugins are
ordered if both are enabled, but does not cause the "dependency" to be enabled
if the "dependent" plugin is, e.g.:</p>
<pre><code class="language-nix">{ config, lib, pkgs, ... }:
{
  pluginRegistry = {
    # vim-devicons needs to be loaded after these plugins, if they
    # are being used, as per its installation guide.
    # Both `after` and `before` can be specified as either `pluginRegistry`
    # attribute names or vim plugin derivations.
    vim-devicons.after = [
      "nerdtree" "vim-airline" "ctrlp-vim" "powerline/powerline" "denite-nvim"
      "unite-vim" "lightline-vim" "vim-startify" "vimfiler" "vim-flagship"
    ];
  };
}
</code></pre>
<p>It should be noted that lazy-loaded plugins don't fully respect ordering
options, and don't trigger lazy-loading of dependencies. Either ensure
dependencies aren't also being lazy-loaded, or put them behind the same
lazy-load triggers as their dependents.</p>
<h2 id="plugin-configuration"><a class="header" href="#plugin-configuration">Plugin Configuration</a></h2>
<p>There is a per-plugin version of the <code>extraConfig</code> option, under
<code>pluginRegistry.&lt;pluginName&gt;.extraConfig</code>. These are inserted into the
generated nvimrc after the <code>prePluginConfig</code>, before the top-level
<code>extraConfig</code>, and in the same order plugins are loaded (that is, based on
dependencies and explicit ordering information).</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="3-advanced-usage"><a class="header" href="#3-advanced-usage">3. Advanced Usage</a></h1>
<p>This chapter provides some notes on more complicated usages of Envy.</p>
<h2 id="plugin-merging"><a class="header" href="#plugin-merging">Plugin Merging</a></h2>
<p>The <a href="options.html#mergeplugins"><code>mergePlugins</code></a> option can be used to merge
plugin directories into symlink trees. This is useful because it reduces the
number of directories that have to be added to neovim's <code>runtimepath</code>, and as a
result it can significantly improve neovim startup times.</p>
<p>There are some restrictions:</p>
<ul>
<li>It may break some plugins outright.</li>
<li>It will only merge plugins that are within the same 'bucket' in the plugin
load order (so that dependent plugins are still loaded after their
dependencies).</li>
<li>It will likely cause issues in cases of colliding file names.</li>
</ul>
<p>As such, it is not enabled by default. If you do enable it, you can disable
merging on a per-plugin basis using the
<a href="options.html#fullpluginregistrynamemergeable"><code>pluginRegistry.&lt;pluginName&gt;.mergeable</code></a>
option.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="a-configuration-options"><a class="header" href="#a-configuration-options">A. Configuration Options</a></h1>
<div class="option">
<h3 id="_moduleargs"><a class="header" href="#_moduleargs"><code>_module.args</code></a></h3>
<div class="option_description">
<p>Additional arguments passed to each module in addition to ones like <code>lib</code>,
<code>config</code>, and <code>pkgs</code>, <code>modulesPath</code>.</p>
<p>This option is also available to all submodules. Submodules do not inherit args
from their parent module, nor do they provide args to their parent module or
sibling submodules. The sole exception to this is the argument <code>name</code> which is
provided by parent modules to a submodule and contains the attribute name the
submodule is bound to, or a unique generated name if it is not bound to an
attribute.</p>
<p>Some arguments are already passed by default, of which the following <em>cannot</em> be
changed with this option:</p>
<ul>
<li>
<p>{var}<code>lib</code>: The nixpkgs library.</p>
</li>
<li>
<p>{var}<code>config</code>: The results of all options after merging the values from all
modules together.</p>
</li>
<li>
<p>{var}<code>options</code>: The options declared in all modules.</p>
</li>
<li>
<p>{var}<code>specialArgs</code>: The <code>specialArgs</code> argument passed to <code>evalModules</code>.</p>
</li>
<li>
<p>All attributes of {var}<code>specialArgs</code></p>
<p>Whereas option values can generally depend on other option values thanks to
laziness, this does not apply to <code>imports</code>, which must be computed
statically before anything else.</p>
<p>For this reason, callers of the module system can provide <code>specialArgs</code>
which are available during import resolution.</p>
<p>For NixOS, <code>specialArgs</code> includes {var}<code>modulesPath</code>, which allows you to
import extra modules from the nixpkgs package tree without having to somehow
make the module aware of the location of the <code>nixpkgs</code> or NixOS directories.</p>
<pre><code>{ modulesPath, ... }: {
  imports = [
    (modulesPath + "/profiles/minimal.nix")
  ];
}
</code></pre>
</li>
</ul>
<p>For NixOS, the default value for this option includes at least this argument:</p>
<ul>
<li>{var}<code>pkgs</code>: The nixpkgs package set according to the {option}<code>nixpkgs.pkgs</code>
option.</li>
</ul>
</div>
<div class="option_properties">
<ul>
<li><em>Type:</em> lazy attribute set of raw value</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="configlanguage"><a class="header" href="#configlanguage"><code>configLanguage</code></a></h3>
<div class="option_description">
<p>The language you wish to use for user-supplied configuration line options
(<code>extraConfig</code>, <code>prePluginConfig</code>, and
<code>pluginRegistry.&lt;pluginName&gt;.extraConfig</code>).</p>
</div>
<div class="option_properties">
<ul>
<li>
<p><em>Type:</em> one of "vimscript", "lua", "moonscript"</p>
</li>
<li>
<p><em>Default:</em> <code>"vimscript"</code></p>
</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="extrabinpackages"><a class="header" href="#extrabinpackages"><code>extraBinPackages</code></a></h3>
<div class="option_description">
<p>A list of derivations containing executables that need to be available in the
<code>$PATH</code> of the neovim process for this plugin to use.</p>
<p>Using the per-plugin <code>binDeps</code> is generally preferred; this should only be
necessary if you need to make executables available for either:</p>
<ul>
<li>A plugin that is <em>not</em> being managed by this module.</li>
<li>A binding or function in your <code>init.vim</code>, or other direct use from within
neovim.</li>
</ul>
</div>
<div class="option_properties">
<ul>
<li>
<p><em>Type:</em> list of package</p>
</li>
<li>
<p><em>Default:</em> <code>[ ]</code></p>
</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="extraconfig"><a class="header" href="#extraconfig"><code>extraConfig</code></a></h3>
<div class="option_description">
<p>Extra lines of <code>init.vim</code> configuration to append to the generated ones,
immediately following any <code>pluginRegistry.&lt;pluginName&gt;.extraConfig</code> config
lines.</p>
</div>
<div class="option_properties">
<ul>
<li>
<p><em>Type:</em> strings concatenated with "\n"</p>
</li>
<li>
<p><em>Default:</em> <code>""</code></p>
</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="extrapython3packages"><a class="header" href="#extrapython3packages"><code>extraPython3Packages</code></a></h3>
<div class="option_description">
<p>A function in <code>python.withPackages</code> format, which returns a list of Python 3
packages required for your plugins to work.</p>
<p>Using the per-plugin <code>python3Deps</code> is strongly preferred; this should only be
necessary if you need some Python 3 packages made available to neovim for a
plugin that is <em>not</em> being managed by this module.</p>
</div>
<div class="option_properties">
<ul>
<li>
<p><em>Type:</em> python3 packages in `python3.withPackages` format</p>
</li>
<li>
<p><em>Default:</em> <code>"ps: []"</code></p>
</li>
<li>
<p><em>Example:</em></p>
<pre><code class="language-nix">(ps: with ps; [ python-language-server ])
</code></pre>
</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="files"><a class="header" href="#files"><code>files</code></a></h3>
<div class="option_description">
<p>Files and folders to link into a folder in the runtimepath; outside of Envy
these would typically be locally-managed files in the <code>~/.config/nvim</code> folder.</p>
</div>
<div class="option_properties">
<ul>
<li>
<p><em>Type:</em> attribute set of (submodule)</p>
</li>
<li>
<p><em>Default:</em> <code>{ }</code></p>
</li>
<li>
<p><em>Example:</em></p>
<pre><code class="language-nix">{
  autoload.source = ./neovim/autoload;
  ftplugin.source = ./neovim/ftplugin;
  "neosnippets/nix.snip".text = ''
    snippet nxo
    abbr    NixOS Module Option
    	mkOption {
    		type = with types; ''${1:str};
    		default = "''${2}";
    		description = ''
    		  ''${3}
    		'';
    		example = "''${4}''${0}";
    	};
  '';
}
</code></pre>
</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="filesnameenable"><a class="header" href="#filesnameenable"><code>files.&lt;name&gt;.enable</code></a></h3>
<div class="option_description">
<p>Whether or not this neovim file should be generated. This option allows specific
files to be disabled.</p>
</div>
<div class="option_properties">
<ul>
<li>
<p><em>Type:</em> boolean</p>
</li>
<li>
<p><em>Default:</em> <code>true</code></p>
</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="filesnamesource"><a class="header" href="#filesnamesource"><code>files.&lt;name&gt;.source</code></a></h3>
<div class="option_description">
<p>Path to the file or directory to symlink in.</p>
<p>If the source is a directory, a directory with a corresponding name will be
created in the folder added to the neovim runtimepath, with symlinks to files in
the source directory, and same the treatment applied recursively for child
directories.</p>
<p>Overrides the text option if both are set.</p>
</div>
<div class="option_properties">
<ul>
<li><em>Type:</em> path</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="filesnametarget"><a class="header" href="#filesnametarget"><code>files.&lt;name&gt;.target</code></a></h3>
<div class="option_description">
<p>Name of the symlink, relative to the folder added to the neovim runtimepath.
Defaults to the attribute name.</p>
</div>
<div class="option_properties">
<ul>
<li><em>Type:</em> string</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="filesnametext"><a class="header" href="#filesnametext"><code>files.&lt;name&gt;.text</code></a></h3>
<div class="option_description">
<p>Literal text of the file. Used to generate a file to set the source option.</p>
</div>
<div class="option_properties">
<ul>
<li>
<p><em>Type:</em> null or strings concatenated with "\n"</p>
</li>
<li>
<p><em>Default:</em> <code>null</code></p>
</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="mergeplugins"><a class="header" href="#mergeplugins"><code>mergePlugins</code></a></h3>
<div class="option_description">
<p>Whether or not to collect plugins into "buckets" based upon their position in
the load order, and then merge those which can be merged, in order to minimise
the number of directories added to vim's <code>runtimepath</code>, decreasing startup time.</p>
</div>
<div class="option_properties">
<ul>
<li>
<p><em>Type:</em> boolean</p>
</li>
<li>
<p><em>Default:</em> <code>false</code></p>
</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="neovimpackage"><a class="header" href="#neovimpackage"><code>neovimPackage</code></a></h3>
<div class="option_description">
<p>The base neovim package to wrap.</p>
</div>
<div class="option_properties">
<ul>
<li>
<p><em>Type:</em> package</p>
</li>
<li>
<p><em>Default:</em> <code>"pkgs.neovim-unwrapped"</code></p>
</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="pluginregistry"><a class="header" href="#pluginregistry"><code>pluginRegistry</code></a></h3>
<div class="option_description">
<p>An attribute set describing the available/known neovim plugins.</p>
</div>
<div class="option_properties">
<ul>
<li>
<p><em>Type:</em> attribute set of (submodule)</p>
</li>
<li>
<p><em>Default:</em> <code>{ }</code></p>
</li>
<li>
<p><em>Example:</em></p>
<pre><code class="language-nix">(let
  inherit (pkgs) vimPlugins;
  pins = import ./niv/sources.nix { };
in {
  nvim-moonmaker = {
    enable = true;
    # Build plugin derivation from a Niv source pins attribute set
    source = config.sn.programs.neovim.lib.buildVimPluginFromNiv pins "nvim-moonmaker";
    # Decide whether or not to load at run-time based on the result of
    # a VimL expression
    condition = "executable('moonc')";
  };

  vim-auto-save = {
    enable = true;
    source = vimPlugins.vim-auto-save;
    # Lazily load on opening a tex file
    for = "tex";
  };

  nerdtree = {
    enable = true;
    source = vimPlugins.nerdtree;
    # Lazily load on command usage
    on_cmd = "NERDTreeToggle";
    extraConfig = ''
      " Prettify NERDTree
      let NERDTreeMinimalUI = 1
      let NERDTreeDirArrows = 1
    '';
  };

  # A "path" plugin built from a source path
  "nginx.vim" = {
    enable = true;
    source = ../nvim-files/local/nginx;
  };

  # A "local" plugin not directly managed by Nix, merely loaded at nvim
  # run-time from the specified directory
  "devplugin" = {
    enable = true;
    dir = "/home/shados/projects/vim/devplugin";
  };

  # A plugin configured but not enabled
  vim-devicons = {
    source = vimPlugins.vim-devicons;
    # vim-devicons needs to be loaded after these plugins, if they
    # are being used, as per its installation guide
    after = [
      "nerdtree" "vim-airline" "ctrlp-vim" "powerline/powerline"
      "denite-nvim" "unite-vim" "lightline-vim" "vim-startify"
      "vimfiler" "vim-flagship"
    ];
  };
})
</code></pre>
</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="pluginregistrynameenable"><a class="header" href="#pluginregistrynameenable"><code>pluginRegistry.&lt;name&gt;.enable</code></a></h3>
<div class="option_description">
<p>Whether or not this neovim plugin should be installed and used.</p>
</div>
<div class="option_properties">
<ul>
<li>
<p><em>Type:</em> boolean</p>
</li>
<li>
<p><em>Default:</em> <code>false</code></p>
</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="pluginregistrynameafter"><a class="header" href="#pluginregistrynameafter"><code>pluginRegistry.&lt;name&gt;.after</code></a></h3>
<div class="option_description">
<p>List of other vim plugins that this plugin should be loaded <em>after</em>.</p>
<p>This can be seen as a "soft" form of making each of the listed plugins
dependencies of this plugin.</p>
<p>Items can either be existing vim plugin derivations, or strings corresponding to
<code>pluginRegistry</code> attributes.</p>
</div>
<div class="option_properties">
<ul>
<li>
<p><em>Type:</em> list of string</p>
</li>
<li>
<p><em>Default:</em> <code>[ ]</code></p>
</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="pluginregistrynamebefore"><a class="header" href="#pluginregistrynamebefore"><code>pluginRegistry.&lt;name&gt;.before</code></a></h3>
<div class="option_description">
<p>List of other vim plugins that this plugin should be loaded <em>before</em>.</p>
<p>This can be seen as a "soft" form of making this plugin a dependency of each of
the listed plugins.</p>
<p>Items can either be existing vim plugin derivations, or strings corresponding to
<code>pluginRegistry</code> attributes.</p>
</div>
<div class="option_properties">
<ul>
<li>
<p><em>Type:</em> list of string</p>
</li>
<li>
<p><em>Default:</em> <code>[ ]</code></p>
</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="pluginregistrynamebindeps"><a class="header" href="#pluginregistrynamebindeps"><code>pluginRegistry.&lt;name&gt;.binDeps</code></a></h3>
<div class="option_description">
<p>A list of derivations containing executables that need to be available in the
<code>$PATH</code> of the neovim process for this plugin to use.</p>
</div>
<div class="option_properties">
<ul>
<li>
<p><em>Type:</em> list of package</p>
</li>
<li>
<p><em>Default:</em> <code>[ ]</code></p>
</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="pluginregistrynamecondition"><a class="header" href="#pluginregistrynamecondition"><code>pluginRegistry.&lt;name&gt;.condition</code></a></h3>
<div class="option_description">
<p>A VimL expression that will be evaluated to determine whether or not to execute
the vim-plug 'Plug' command for this plugin (which will typically load the
plugin, or configure it to be lazily loaded).</p>
<p>Leave null in order to unconditionally always run the 'Plug' command for this
plugin.</p>
</div>
<div class="option_properties">
<ul>
<li>
<p><em>Type:</em> null or string</p>
</li>
<li>
<p><em>Default:</em> <code>null</code></p>
</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="pluginregistrynamedependencies"><a class="header" href="#pluginregistrynamedependencies"><code>pluginRegistry.&lt;name&gt;.dependencies</code></a></h3>
<div class="option_description">
<p>List of other vim plugins that are dependencies of this plugin.</p>
<p>Items can either be existing vim plugin derivations, or strings corresponding to
<code>pluginRegistry</code> attributes.</p>
</div>
<div class="option_properties">
<ul>
<li>
<p><em>Type:</em> list of (string or package)</p>
</li>
<li>
<p><em>Default:</em> <code>[ ]</code></p>
</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="pluginregistrynamedir"><a class="header" href="#pluginregistrynamedir"><code>pluginRegistry.&lt;name&gt;.dir</code></a></h3>
<div class="option_description">
<p>If set, specifies a directory path that the plugin should be loaded from at
neovim run-time, avoiding the use of a Nix-provided plugin directory.</p>
<p>Relative paths will be relative to the generated <code>init.vim</code>, which is in the Nix
store. As the value is passed into a '-quoted VimL string, it is possible to
escape this to use a relative path, e.g.:</p>
<pre><code class="language-nix">' . $HOME. '/.config/vim/local/some-plugin
</code></pre>
<p>If this is set, <code>source</code> will not be used.</p>
</div>
<div class="option_properties">
<ul>
<li>
<p><em>Type:</em> null or string</p>
</li>
<li>
<p><em>Default:</em> <code>null</code></p>
</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="pluginregistrynameextraconfig"><a class="header" href="#pluginregistrynameextraconfig"><code>pluginRegistry.&lt;name&gt;.extraConfig</code></a></h3>
<div class="option_description">
<p>Extra lines of <code>init.vim</code> configuration associated with this plugin, that need
to be executed after the plugin loading.</p>
<p>Leave null if no such extra configuration is required.</p>
</div>
<div class="option_properties">
<ul>
<li>
<p><em>Type:</em> null or strings concatenated with "\n"</p>
</li>
<li>
<p><em>Default:</em> <code>null</code></p>
</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="pluginregistrynamefor"><a class="header" href="#pluginregistrynamefor"><code>pluginRegistry.&lt;name&gt;.for</code></a></h3>
<div class="option_description">
<p>One or more filetypes that should trigger on-demand/lazy loading of this plugin.</p>
<p>Can be specified with either a single string or list of strings.</p>
<p>NOTE: Lazy-loading functionality will likely conflict with the use of any
additional, non-Envy plugin manager.</p>
</div>
<div class="option_properties">
<ul>
<li>
<p><em>Type:</em> string or list of string</p>
</li>
<li>
<p><em>Default:</em> <code>[ ]</code></p>
</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="pluginregistrynameluadeps"><a class="header" href="#pluginregistrynameluadeps"><code>pluginRegistry.&lt;name&gt;.luaDeps</code></a></h3>
<div class="option_description">
<p>A function that takes an attribute set of Lua packages (typically passed from
nixpkgs) and returns a list of Lua packages that this plugin depends on.</p>
</div>
<div class="option_properties">
<ul>
<li>
<p><em>Type:</em> lua packages in `lua.withPackages` format</p>
</li>
<li>
<p><em>Default:</em> <code>"packageSet: []"</code></p>
</li>
<li>
<p><em>Example:</em></p>
<pre><code class="language-nix">(packageSet: with packageSet: [ luafilesystem ])
</code></pre>
</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="pluginregistrynamemergeable"><a class="header" href="#pluginregistrynamemergeable"><code>pluginRegistry.&lt;name&gt;.mergeable</code></a></h3>
<div class="option_description">
<p>Whether or not it is safe to merge this plugin with others in the same bucket in
the load order.</p>
</div>
<div class="option_properties">
<ul>
<li>
<p><em>Type:</em> boolean</p>
</li>
<li>
<p><em>Default:</em> <code>true</code></p>
</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="pluginregistrynameon_cmd"><a class="header" href="#pluginregistrynameon_cmd"><code>pluginRegistry.&lt;name&gt;.on_cmd</code></a></h3>
<div class="option_description">
<p>One or more commands that should trigger on-demand/lazy loading of this plugin.</p>
<p>Can be specified with either a single string or list of strings.</p>
<p>NOTE: Lazy-loading functionality will likely conflict with the use of any
additional, non-Envy plugin manager.</p>
</div>
<div class="option_properties">
<ul>
<li>
<p><em>Type:</em> string or list of string</p>
</li>
<li>
<p><em>Default:</em> <code>[ ]</code></p>
</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="pluginregistrynameon_map"><a class="header" href="#pluginregistrynameon_map"><code>pluginRegistry.&lt;name&gt;.on_map</code></a></h3>
<div class="option_description">
<p>One or more &lt;Plug&gt;-mappings that should trigger on-demand/lazy loading of this
plugin.</p>
<p>Can be specified with either a single string or list of strings.</p>
<p>NOTE: Lazy-loading functionality will likely conflict with the use of any
additional, non-Envy plugin manager.</p>
</div>
<div class="option_properties">
<ul>
<li>
<p><em>Type:</em> string or list of string</p>
</li>
<li>
<p><em>Default:</em> <code>[ ]</code></p>
</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="pluginregistrynameremotepython3"><a class="header" href="#pluginregistrynameremotepython3"><code>pluginRegistry.&lt;name&gt;.remote.python3</code></a></h3>
<div class="option_description">
<p>Whether or not this plugin requires the remote plugin host for Python 3.</p>
<p>Will effectively be set to true if any Python 3 package dependencies are
specified for this plugin.</p>
</div>
<div class="option_properties">
<ul>
<li>
<p><em>Type:</em> boolean</p>
</li>
<li>
<p><em>Default:</em> <code>false</code></p>
</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="pluginregistrynameremotepython3deps"><a class="header" href="#pluginregistrynameremotepython3deps"><code>pluginRegistry.&lt;name&gt;.remote.python3Deps</code></a></h3>
<div class="option_description">
<p>A function that takes an attribute set of Python 3 packages (typically passed
from nixpkgs) and returns a list of Python 3 packages that this plugin depends
on.</p>
</div>
<div class="option_properties">
<ul>
<li>
<p><em>Type:</em> python3 packages in `python3.withPackages` format</p>
</li>
<li>
<p><em>Default:</em> <code>"packageSet: []"</code></p>
</li>
<li>
<p><em>Example:</em></p>
<pre><code class="language-nix">(packageSet: with packageSet: [ python-language-server ])
</code></pre>
</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="pluginregistrynamertp"><a class="header" href="#pluginregistrynamertp"><code>pluginRegistry.&lt;name&gt;.rtp</code></a></h3>
<div class="option_description">
<p>Subdirectory of the plugin source that contains the Vim plugin.</p>
<p>Leave as <code>null</code> to simply use the root of the source.</p>
</div>
<div class="option_properties">
<ul>
<li>
<p><em>Type:</em> null or string</p>
</li>
<li>
<p><em>Default:</em> <code>null</code></p>
</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="pluginregistrynamesource"><a class="header" href="#pluginregistrynamesource"><code>pluginRegistry.&lt;name&gt;.source</code></a></h3>
<div class="option_description">
<p>Source of the vim plugin.</p>
<p>Set to an existing vim plugin derivation, or to a Nix store path to build a vim
plugin derivation from. Otherwise, leave this as <code>null</code> and set the <code>dir</code>
configuration option for this plugin instead.</p>
</div>
<div class="option_properties">
<ul>
<li>
<p><em>Type:</em> null or path or package or string</p>
</li>
<li>
<p><em>Default:</em> <code>null</code></p>
</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="prepluginconfig"><a class="header" href="#prepluginconfig"><code>prePluginConfig</code></a></h3>
<div class="option_description">
<p>Extra lines of <code>init.vim</code> configuration to append to the generated ones,
immediately prior to any <code>pluginRegistry.&lt;pluginName&gt;.extraConfig</code> config lines.</p>
<p>Leave null if no such extra configuration is required.</p>
</div>
<div class="option_properties">
<ul>
<li>
<p><em>Type:</em> null or strings concatenated with "\n"</p>
</li>
<li>
<p><em>Default:</em> <code>null</code></p>
</li>
</ul>
</div>
</div>
<div class="option">
<h3 id="withpython3"><a class="header" href="#withpython3"><code>withPython3</code></a></h3>
<div class="option_description">
<p>Enable Python 3 provider. Set to <code>true</code> to use Python 3 plugins.</p>
</div>
<div class="option_properties">
<ul>
<li>
<p><em>Type:</em> boolean</p>
</li>
<li>
<p><em>Default:</em> <code>false</code></p>
</li>
</ul>
</div>
</div>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
